<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>BNK ì‡¼í•‘í™˜ì „í†µì¥ - ìƒí’ˆ ê°€ì…</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <style>
    body { font-family:'Inter',sans-serif; background:#f0f4f8; margin:0; overflow-x:hidden; }
    .container {
      max-width:500px; margin:0 auto; background:#fff; min-height:100vh; display:flex; flex-direction:column;
      border-radius:1rem; box-shadow:0 4px 12px rgba(0,0,0,.05); overflow:hidden;
    }
    header { flex:none; }
    .bottom-bar {
      flex:none; width:100%; background:#fff; border-top:1px solid #e2e8f0; padding:.75rem 1rem; gap:.5rem;
      box-shadow:0 -4px 12px rgba(0,0,0,.03); display:flex; justify-content:space-around; z-index:10;
    }
    .bottom-bar button { flex:1; padding:.75rem 1rem; border-radius:.75rem; font-weight:600; font-size:.95rem; transition:.2s; box-shadow:0 2px 6px rgba(0,0,0,.1); }
    .bottom-bar button:active { transform:scale(.98); }

    .main-content { flex:1; padding:.75rem; display:flex; flex-direction:column; gap:1rem; overflow-y:auto; }
    .section-block { background:#fff; border-radius:.75rem; box-shadow:0 4px 12px rgba(0,0,0,.05); display:flex; flex-direction:column; overflow:hidden; }
    .section-title { font-size:1rem; font-weight:600; color:#374151; display:flex; align-items:center; justify-content:space-between; padding:1.5rem; }
    .section-title .checkmark { color:#10b981; font-size:1.2rem; margin-left:.5rem; display:none; }
    .section-title .title-text { display:flex; align-items:center; flex:1; }
    .form-group { margin-bottom:1rem; }
    .form-group label { display:block; font-size:.9rem; font-weight:500; color:#4b5563; margin-bottom:.5rem; }
    .form-group input, .form-group select {
      width:100%; padding:.75rem 1rem; border:1px solid #d1d5db; border-radius:.5rem; font-size:1rem; color:#374151; background:#f9fafb;
    }
    .form-group input:focus, .form-group select:focus { outline:none; border-color:#2563eb; box-shadow:0 0 0 2px rgba(37,99,235,.2); }
    .form-group input[readonly]{ background:#e5e7eb; cursor:not-allowed; }
    #encouragementMessage { white-space:pre-wrap; font-size:1rem; }

    .section-content { max-height:1000px; overflow:hidden; transition:max-height .5s ease-out; }
    .section-content.collapsed { max-height:0; }
    .section-content-inner { padding:1.5rem; }
    .section-block.collapsible .section-title { cursor:pointer; }
    .section-block.collapsible .section-title .toggle-icon { transition:transform .3s ease; display:inline-block; }
    .section-block.collapsible .section-title.rotated .toggle-icon { transform:rotate(180deg); }
    .section-block.collapsible.confirmed .section-title .toggle-icon { display:none; }

    /* Step bar */
    .step-indicator { display:flex; width:100%; height:4px; background:#e0e0e0; border-radius:2px; overflow:hidden; margin-top:.5rem; }
    .step-indicator-progress { width:66.66%; height:100%; background:#2563eb; }

    /* MODAL (Full-screen style) */
    .modal-overlay {
      position:fixed; inset:0; background:rgba(0,0,0,.6);
      display:flex; align-items:center; justify-content:center; z-index:1000;
      opacity:0; visibility:hidden; transition:opacity .3s ease, visibility .3s ease;
    }
    .modal-overlay.active { opacity:1; visibility:visible; }
    .modal-content {
      background:#fff; border-radius:.75rem; box-shadow:0 8px 20px rgba(0,0,0,.2);
      width:96vw; height:92vh; display:flex; flex-direction:column; overflow:hidden;
      transform:translateY(20px); transition:transform .3s ease;
    }
    .modal-overlay.active .modal-content { transform:translateY(0); }
    .modal-header { padding:1rem 1.25rem; border-bottom:1px solid #e2e8f0; display:flex; justify-content:space-between; align-items:center; font-weight:600; color:#374151; }
    .modal-body { flex:1; padding:0; overflow:hidden; }
    .modal-footer { padding:.75rem 1.25rem; border-top:1px solid #e2e8f0; display:flex; justify-content:center; gap:1rem; }
    .modal-close-button { background:none; border:none; font-size:1.5rem; color:#9ca3af; cursor:pointer; line-height:1; }
    .modal-close-button:hover { color:#4b5563; }
    .modal-button { padding:.75rem 1.5rem; border-radius:.5rem; font-weight:600; font-size:.95rem; transition:background-color .2s ease, transform .2s ease; }
    .modal-button.primary { background:#2563eb; color:#fff; border:none; }
    .modal-button.primary:hover { background:#1d4ed8; }

    /* Terms pages fill modal height */
    .terms-page { display:none; height:100%; flex-direction:column; }
    .terms-page.active { display:flex; height:100%; }

    /* Summary page scrollable */
    .summary-scroll { padding:1rem 1.25rem; overflow:auto; -webkit-overflow-scrolling:touch; flex-grow: 1; }
    .summary-list { list-style:none; padding:0; margin:0; }
    .summary-list li {
      background:#fff;
      border:2px solid #3b82f6;
      border-radius:.75rem;
      padding:1rem; margin-bottom:.75rem; color:#4b5563; line-height:1.5;
      box-shadow:0 2px 8px rgba(0,0,0,.08);
    }
    .summary-num { font-weight:800; color:#111827; margin-right:.5rem; }
    .summary-title { font-weight:700; color:#111827; }
    .summary-content { display:block; margin-top:.35rem; }

    /* PDF viewer fills remaining space */
    .pdf-viewer-iframe {
      flex:1 1 auto;
      width:100%;
      height:100%; /* Ensures it takes full available height within its flex container */
      border: 1px solid #e0e0e0; /* Subtle border for better visual separation */
      border-radius: .5rem; /* Rounded corners */
      box-shadow: 0 2px 8px rgba(0,0,0,.05); /* Soft shadow */
      background-color: #fff; /* Explicitly white background */
    }

    /* Custom scrollable content within list item */
    .scrollable-content-wrapper {
      max-height: 70vh; /* Increased height for customer check item 4 scroll */
      overflow-y: auto;
      padding-right: 0.5rem;
      margin-top: 0.5rem;
    }
    .scrollable-content-wrapper p,
    .scrollable-content-wrapper ul {
      margin-bottom: 0.75rem;
    }
    .scrollable-content-wrapper p:last-child,
    .scrollable-content-wrapper ul:last-child {
      margin-bottom: 0;
    }
    .scrollable-content-wrapper h4 {
      font-weight: 600;
      color: #1f2937;
      margin-bottom: 0.5rem;
      margin-top: 1rem;
      text-align: center; /* Contract title center alignment */
    }
    .scrollable-content-wrapper h4:first-child {
      margin-top: 0;
    }

    /* Grouped content box style */
    .grouped-content-box {
        background:#fff;
        border:2px solid #3b82f6;
        border-radius:.75rem;
        padding:1rem;
        margin-bottom:0.75rem;
        box-shadow:0 2px 8px rgba(0,0,0,.08);
    }
    .grouped-content-box h4 {
      margin-top: 0 !important;
    }
    .grouped-content-box ul {
      margin-left: 1.25rem;
      list-style: disc;
    }
    .grouped-content-box ul li {
        border: none;
        box-shadow: none;
        background: none;
        padding: 0;
        margin-bottom: 0.25rem;
    }
    .grouped-content-box ul li:last-child {
        margin-bottom: 0;
    }
  </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center">
  <div class="container">
    <!-- Header -->
    <header class="flex items-center justify-between p-4 bg-white border-b border-gray-200">
      <a href="/foreign0" class="flex items-center text-blue-700 font-medium text-base hover:text-blue-800 transition-colors duration-300">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7"/>
        </svg>
        í™ˆìœ¼ë¡œ
      </a>
      <h1 class="text-xl font-bold text-gray-800">ìƒí’ˆ ê°€ì…</h1>
      <span class="w-5 h-5 opacity-0"></span>
    </header>

    <!-- Step -->
    <div class="step-indicator mx-4 mt-4"><div class="step-indicator-progress"></div></div>

    <!-- Main -->
    <main class="main-content">
      <div id="encouragementMessage" class="text-center text-base font-semibold text-gray-700 p-3 rounded-lg bg-yellow-100 mx-0 mt-0 shadow-sm"></div>

      <!-- ë™ì˜ ì„¹ì…˜ -->
      <div id="agreementConsentSection" class="section-block collapsible">
        <h2 class="section-title">
          <span class="title-text">ê°€ì… ê´€ë ¨ ë™ì˜ <span id="agreementConsentCheckmark" class="checkmark">âœ”</span></span>
          <svg id="agreementConsentToggleIcon" class="toggle-icon h-5 w-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg>
        </h2>
        <div id="agreementConsentContent" class="section-content">
          <div class="section-content-inner">
            <button id="openTermsModalBtn" class="w-full bg-blue-500 text-white py-3 rounded-lg font-semibold mb-3 hover:bg-blue-600 transition-colors">ì•½ê´€ ë° ì„¤ëª…ì„œ ë™ì˜</button>
            <button id="openCustomerCheckModalBtn" class="w-full bg-blue-500 text-white py-3 rounded-lg font-semibold hover:bg-blue-600 transition-colors">ê³ ê° í™•ì¸ ì‚¬í•­ í™•ì¸</button>
          </div>
        </div>
      </div>

      <!-- ê°€ì… ë‚´ìš© -->
      <div id="enrollmentContentSection" class="section-block collapsible collapsed">
        <h2 class="section-title">
          <span class="title-text">ê°€ì… ë‚´ìš© <span id="enrollmentContentCheckmark" class="checkmark hidden">âœ”</span></span>
          <svg id="enrollmentContentToggleIcon" class="toggle-icon h-5 w-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/></svg>
        </h2>
        <div id="enrollmentContentInner" class="section-content">
          <div class="section-content-inner">
            <div class="form-group">
              <label for="enrollmentAmount">ê°€ì… ê¸ˆì•¡</label>
              <input type="number" id="enrollmentAmount" placeholder="ê°€ì… ê¸ˆì•¡ì„ ì…ë ¥í•´ì£¼ì„¸ìš”">
            </div>
            <div class="form-group">
              <label for="currencySelect">í†µí™” ì„ íƒ</label>
              <select id="currencySelect">
                <option value="">í†µí™”ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</option>
                <option value="USD">USD - ë¯¸êµ­ ë‹¬ëŸ¬</option>
                <option value="JPY">JPY - ì¼ë³¸ ì—”</option>
                <option value="EUR">EUR - ìœ ë¡œ</option>
                <option value="GBP">GBP - ì˜êµ­ íŒŒìš´ë“œ</option>
                <option value="CNY">CNY - ì¤‘êµ­ ìœ„ì•ˆ</option>
                <option value="KRW">KRW - ëŒ€í•œë¯¼êµ­ ì›</option>
              </select>
            </div>
            <div class="form-group">
              <label for="withdrawalEstimate">ì›í™”ì¶œê¸ˆ ì˜ˆìƒì•¡ ì¡°íšŒ</label>
              <input type="text" id="withdrawalEstimate" placeholder="ì¡°íšŒí•˜ê¸° ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”" readonly>
              <button id="lookupEstimateBtn" class="w-full bg-gray-200 text-gray-700 py-2 mt-2 rounded-lg font-semibold hover:bg-gray-300 transition-colors">ì¡°íšŒí•˜ê¸°</button>
            </div>
            <div class="form-group">
              <label for="withdrawalAccount">ì¶œê¸ˆ ê³„ì¢Œ</label>
              <!-- ì¶œê¸ˆ ê³„ì¢Œë¥¼ ì…ë ¥ í•„ë“œë¡œ ë³€ê²½ ë° readonly ì„¤ì • -->
              <input type="text" id="withdrawalAccount" value="BNKë¶€ì‚°ì€í–‰ 112-4567-7890-01" readonly class="bg-gray-200 cursor-not-allowed">
            </div>
          </div>
        </div>
      </div>
    </main>

    <!-- Bottom -->
    <footer class="bottom-bar">
      <button id="prevButton" class="bg-gray-200 text-gray-700 hover:bg-gray-300">ì´ì „</button>
      <button id="nextButton" class="bg-gray-400 text-white cursor-not-allowed" disabled>ë‹¤ìŒìœ¼ë¡œ</button>
    </footer>
  </div>

  <!-- ì•½ê´€/ì„¤ëª…ì„œ ëª¨ë‹¬ -->
  <div id="termsModal" class="modal-overlay hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="termsModalTitle">ì•½ê´€ ë° ì„¤ëª…ì„œ ë™ì˜</h3>
        <button class="modal-close-button" onclick="closeModal('termsModal')">&times;</button>
      </div>
      <div class="modal-body">
        <!-- Page 1: ìš”ì•½ë³¸ -->
        <div id="termsPage1" class="terms-page active">
          <div class="summary-scroll">
            <h4 class="font-bold text-gray-800 text-lg mb-4 text-center">ìš”ì•½ë³¸</h4>
            <ol class="summary-list">
              <li>
                <span class="summary-num">1.</span>
                <span class="summary-title">ìƒí’ˆë³„ì ìš©ì•½ê´€</span><br>
                <span class="summary-content">ê³„ì¢Œ ê°œì„¤Â·ê±°ë˜ì˜ ê¸°ë³¸ ê·œì¹™, ì´ì/ìˆ˜ìˆ˜ë£Œ ë¶€ê³¼ ê¸°ì¤€, ì „ìê¸ˆìœµ ì´ìš©, íœ´ë©´Â·í•´ì§€ ì ˆì°¨, ë¶„ìŸì²˜ë¦¬ì™€ ì•½ê´€ ë³€ê²½ í†µì§€ ë°©ë²•ì„ ê·œì •í•©ë‹ˆë‹¤.</span>
              </li>
              <li>
                <span class="summary-num">2.</span>
                <span class="summary-title">ì™¸í™”ë³´í†µì˜ˆê¸ˆ ìƒí’ˆì„¤ëª…ì„œ</span><br>
                <span class="summary-content">ìƒí’ˆ ê°œìš”ì™€ ê°€ì…ëŒ€ìƒ, ì˜ˆì¹˜Â·ì¸ì¶œ ë°©ë²•, ê¸ˆë¦¬ ì‚°ì •ê³¼ ì„¸ê¸ˆ, í™˜ìœ¨Â·ìˆ˜ìˆ˜ë£Œ ë° ìœ„í—˜, ì˜ˆê¸ˆìë³´í˜¸ ë²”ìœ„, ì¤‘ë„í•´ì§€ ì‹œ ë¶ˆì´ìµ ë“±ì„ ì•ˆë‚´í•©ë‹ˆë‹¤.</span>
              </li>
              <li>
                <span class="summary-num">3.</span>
                <span class="summary-title">ì„¤ëª…ì˜ë¬´ê´€ë ¨í™•ì¸ì„œ(ì°¨ëª…ê±°ë˜ê¸ˆì§€)</span><br>
                <span class="summary-content">ì‹¤ëª…í™•ì¸ ì˜ë¬´ ë° ì°¨ëª…ê±°ë˜ ê¸ˆì§€ì™€ ê·¸ ì œì¬ì— ëŒ€í•´ ê³ ì§€ë°›ì•˜ìŒì„ í™•ì¸í•˜ê³ , ê´€ë ¨ ë²•ê·œ ì¤€ìˆ˜ì— ë™ì˜í•œë‹¤ëŠ” ë‚´ìš©ì„ ë‹´ìŠµë‹ˆë‹¤.</span>
              </li>
              <li>
                <span class="summary-num">4.</span>
                <span class="summary-title">ê°œì¸(ì‹ ìš©)ì •ë³´ ìˆ˜ì§‘Â·ì´ìš©Â·ì œê³µÂ·ì¡°íšŒ ë™ì˜ì„œ(ë¹„ëŒ€ë©´ ì•ˆì‹¬ì°¨ë‹¨)</span><br>
                <span class="summary-content">ìˆ˜ì§‘ í•­ëª©ê³¼ ì´ìš© ëª©ì (ë³¸ì¸í™•ì¸Â·ê±°ë˜ê´€ë¦¬Â·ë²•ë ¹ ì¤€ìˆ˜), ë³´ìœ ê¸°ê°„, ì œ3ì ì œê³µ, ì•ˆì‹¬ì°¨ë‹¨ ì„œë¹„ìŠ¤ ì•ˆë‚´, ë™ì˜/ì² íšŒ ë°©ë²•ì„ ëª…ì‹œí•©ë‹ˆë‹¤.</span>
              </li>
            </ol>
          </div>
        </div>

        <!-- Page 2 -->
        <div id="termsPage2" class="terms-page">
          <!-- H4 tag will be dynamically added here by JS for centering -->
          <iframe src="https://drive.google.com/file/d/1GClaAcMVQeXwKBSUZDZD-CrrCMWC2PJd/preview" class="pdf-viewer-iframe" allow="autoplay"></iframe>
        </div>

        <!-- Page 3 -->
        <div id="termsPage3" class="terms-page">
          <!-- H4 tag will be dynamically added here by JS for centering -->
          <iframe src="https://drive.google.com/file/d/15wwn9df-I70sL1TSLHv5m9KHFWOS1yuZ/preview" class="pdf-viewer-iframe" allow="autoplay"></iframe>
        </div>

        <!-- Page 4 -->
        <div id="termsPage4" class="terms-page">
          <!-- H4 tag will be dynamically added here by JS for centering -->
          <iframe src="https://drive.google.com/file/d/1iI2juipDYmW_Ok9c_VGhaHtXi8OEpGIC/preview" class="pdf-viewer-iframe" allow="autoplay"></iframe>
        </div>

        <!-- Page 5 -->
        <div id="termsPage5" class="terms-page">
          <!-- H4 tag will be dynamically added here by JS for centering -->
          <iframe src="https://drive.google.com/file/d/10RBKoscPB6Zz93y476Hg12GNZ44Le6tT/preview" class="pdf-viewer-iframe" allow="autoplay"></iframe>
        </div>
      </div>
      <div class="modal-footer">
        <button id="termsAgreeBtn" class="modal-button primary">ë™ì˜í•˜ê¸°</button>
      </div>
    </div>
  </div>

  <!-- ê³ ê° í™•ì¸ ëª¨ë‹¬ - Part 1 -->
  <div id="customerCheckModal" class="modal-overlay hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3>ê³ ê° í™•ì¸ ì‚¬í•­ (1/2)</h3>
        <button class="modal-close-button" onclick="closeModal('customerCheckModal')">&times;</button>
      </div>
      <div class="modal-body">
        <div class="summary-scroll">
          <ul class="summary-list">
            <li>
              <span class="summary-num">1.</span>
              <span class="summary-title">ì˜ˆê¸ˆìë³´í˜¸ë²•</span><br>
              <span class="summary-content">ë³¸ì¸ì´ ê°€ì…í•˜ëŠ” ê¸ˆìœµìƒí’ˆì˜ ì˜ˆê¸ˆìë³´í˜¸ ì—¬ë¶€ ë° ë³´í˜¸í•œë„(ì›ê¸ˆê³¼ ì†Œì •ì˜ ì´ìë¥¼ í•©í•˜ì—¬ 1ì¸ë‹¹ 5ì²œë§Œì›)ì— ëŒ€í•˜ì—¬ ì„¤ëª…ì„ ë³´ê³ , ì¶©ë¶„íˆ ì´í•´í•˜ì˜€ìŒì„ í™•ì¸í•©ë‹ˆë‹¤.</span>
            </li>
            <li>
              <span class="summary-num">2.</span>
              <span class="summary-title">ê¸ˆìœµì‹¤ëª…ê±°ë˜ ë° ë¹„ë°€ë³´ì¥ì— ê´€í•œ ë²•ë¥ </span><br>
              <span class="summary-content">ì œ3ì¡° ì œ3í•­ì— ë”°ë¼ ë¶ˆë²•ì¬ì‚°ì˜ ì€ë‹‰, ìê¸ˆì„¸íƒí–‰ìœ„, ê³µì¤‘í˜‘ë°•, ìê¸ˆì¡°ë‹¬í–‰ìœ„ ë° ê°•ì œ ì§‘í–‰ì˜ ë©´íƒˆ, ê·¸ ë°–ì˜ íƒˆë²• í–‰ìœ„ë¥¼ ëª©ì ìœ¼ë¡œ íƒ€ì¸ì˜ ì‹¤ëª…ìœ¼ë¡œ ê¸ˆìœµê±°ë˜ë¥¼ í•˜ì—¬ì„œëŠ” ì•„ë‹ˆë˜ë©°, ì´ë¥¼ ìœ„ë°˜ ì‹œ 5ë…„ ì´í•˜ì˜ ì§•ì—­ ë˜ëŠ” 5ì²œë§Œì› ì´í•˜ì˜ ë²Œê¸ˆì— ì²˜í•  ìˆ˜ ìˆìŒì„ ê³ ì§€ë°›ê³  ì´í•´í•˜ì˜€ìŠµë‹ˆë‹¤.</span>
            </li>
            <li>
              <span class="summary-num">3.</span>
              <span class="summary-title">ì•½ê´€ ë° ìƒí’ˆì„¤ëª…ì„œ ì´í•´</span><br>
              <span class="summary-content">ê¸ˆìœµíšŒì‚¬ëŠ” ã€Œê¸ˆìœµì†Œë¹„ìë³´í˜¸ì— ê´€í•œ ë²•ë¥  (ì‹œí–‰ì¼ 2021.03.25)ã€ ì œ19ì¡°(ì„¤ëª…ì˜ë¬´)ì— ë”°ë¼ ì˜ˆê¸ˆìƒí’ˆì˜ ì¤‘ìš”í•œ ì‚¬í•­ì„ ì†Œë¹„ìê°€ ì´í•´í•  ìˆ˜ ìˆë„ë¡ ì„¤ëª…í•´ì•¼ í•˜ë©°, ë™ë²• ì œ23ì¡°(ê³„ì•½ì„œë¥˜ì˜ ì œê³µì˜ë¬´)ì— ë”°ë¼ ê¸ˆìœµì†Œë¹„ìì—ê²Œ ì§€ì²´ì—†ì´ ì œê³µí•´ì•¼ í•©ë‹ˆë‹¤. ë³¸ì¸ì€ ì•½ê´€ ë° ìƒí’ˆì„¤ëª…ì„œì˜ ì£¼ìš”ë‚´ìš©ì— ëŒ€í•˜ì—¬ ì¶©ë¶„íˆ ì´í•´í•˜ì˜€ìŠµë‹ˆë‹¤.</span>
            </li>
          </ul>
        </div>
      </div>
      <div class="modal-footer">
        <button id="customerCheckAgreeBtn" class="modal-button primary">ëª¨ë‘ ë™ì˜ (1 / 2)</button>
      </div>
    </div>
  </div>

  <!-- ê³ ê° í™•ì¸ ëª¨ë‹¬ - Part 2 -->
  <div id="customerCheckModalPart2" class="modal-overlay hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h3>ê³ ê° í™•ì¸ ì‚¬í•­ (2/2)</h3>
        <button class="modal-close-button" onclick="closeModal('customerCheckModalPart2')">&times;</button>
      </div>
      <div class="modal-body">
        <div class="summary-scroll">
          <ul class="summary-list">
            <li>
              <span class="summary-num">4.</span>
              <span class="summary-title">ì•½ê´€ ë° ìƒí’ˆì„¤ëª…ì„œ ìˆ˜ë ¹ í™•ì¸</span><br>
              <div class="scrollable-content-wrapper">
                <div class="grouped-content-box">
                  <h4 class="font-semibold text-gray-800">ê³µí†µ</h4>
                  <ul class="list-disc text-gray-700">
                    <li>ë¯¼ì›ì²˜ë¦¬ ì ˆì°¨ ë° ë¶„ìŸì¡°ì •</li>
                    <li>ì˜ˆê¸ˆìë³´í˜¸ì—¬ë¶€ ë° ê·¸ ë‚´ìš©</li>
                    <li>ê³„ì•½ì˜ í•´ì œ, í•´ì§€ ë° ìœ„ë²• ê³„ì•½ í•´ì§€ê¶Œ</li>
                  </ul>
                </div>

                <div class="grouped-content-box mt-2">
                  <h4 class="font-semibold text-gray-800">ì˜ˆê¸ˆì„±</h4>
                  <ul class="list-disc text-gray-700">
                    <li>ê³„ì•½ê¸°ê°„, ì´ìì˜ ì§€ê¸‰ì‹œê¸° ë° ì§€ê¸‰ì œí•œ ì‚¬ìœ </li>
                    <li>ì´ììœ¨(ê¸°ë³¸+ìš°ëŒ€), ì¤‘ë„í•´ì§€ì´ììœ¨, ë§Œê¸°í•´ì§€ì´ììœ¨, ë§Œê¸°í›„ì´ììœ¨, ìˆ˜ìµë¥  ë° ì‚°ì¶œê·¼ê±° ë“±</li>
                    <li>ìˆ˜ìˆ˜ë£Œ ë“± ë¶€ëŒ€ë¹„ìš©, ì¼ë°˜ ê¸ˆìœµì†Œë¹„ì ê³„ì•½í•´ì§€ ì‹œ ë¶ˆì´ìµ</li>
                    <li>ì´ìš© ì œí•œì‚¬í•­(ê³„ì¢Œì´ì²´ ì œí•œ ë“±)</li> <!-- ì¶”ê°€ëœ ë‚´ìš© -->
                    <li>ì¸ìš©í•œ ìë£Œì˜ ì¶œì²˜</li> <!-- ì¶”ê°€ëœ ë‚´ìš© -->
                  </ul>
                </div>

                <div class="grouped-content-box mt-2">
                  <h4 class="font-semibold text-gray-800">ì—°ê³„ì œíœ´</h4>
                  <ul class="list-disc text-gray-700">
                    <li>ì—°ê³„, ì œíœ´ì„œë¹„ìŠ¤ ë“±ì˜ ë‚´ìš©</li>
                    <li>ì—°ê³„, ì œíœ´ì„œë¹„ìŠ¤ ë“±ì˜ ì´í–‰ì±…ì„ì— ê´€í•œ ì‚¬í•­</li>
                    <li>ì—°ê³„, ì œíœ´ì„œë¹„ìŠ¤ ë“±ì˜ ì œê³µê¸°ê°„</li>
                    <li>ì—°ê³„, ì œíœ´ì„œë¹„ìŠ¤ ë“±ì˜ ë‚´ìš©ë³€ê²½ ë° ê·¸ ì‚¬ìœ  ë“±ì„ ì¼ë°˜ê¸ˆìœµì†Œë¹„ìì—ê²Œ ì•Œë¦°ë‹¤ëŠ” ì‚¬ì‹¤ ë° ê·¸ ê³ ì§€ë°©ë²• ë“± ë‚´ìš©</li>
                  </ul>
                </div>
                <p class="summary-content mt-4 text-center">
                  ë³¸ì¸ì€ ì•½ê´€ ë° ìƒí’ˆì„¤ëª…ì„œë¥¼ ì œê³µë°›ê³ <br>
                  ê·¸ ë‚´ìš©ì„ ì¶©ë¶„íˆ ì´í•´í•˜ë©°<br>
                  ë³¸ ìƒí’ˆì— ê°€ì…í•¨ì„ í™•ì¸í•©ë‹ˆë‹¤.
                </p>
              </div>
            </li>
          </ul>
        </div>
      </div>
      <div class="modal-footer">
        <button id="customerCheckAgreeBtnPart2" class="modal-button primary">ëª¨ë‘ ë™ì˜ (2 / 2)</button>
      </div>
    </div>
  </div>

  <script>
    // DOM ìš”ì†Œ ì°¸ì¡°
    const homeButton = document.querySelector('header a');
    const prevButton = document.getElementById('prevButton');
    const nextButton = document.getElementById('nextButton');
    const encouragementMessageDiv = document.getElementById('encouragementMessage');

    const agreementConsentSection = document.getElementById('agreementConsentSection');
    const agreementConsentTitle = agreementConsentSection.querySelector('.section-title');
    const agreementConsentCheckmark = document.getElementById('agreementConsentCheckmark');
    const agreementConsentContent = document.getElementById('agreementConsentContent');
    const openTermsModalBtn = document.getElementById('openTermsModalBtn');
    const openCustomerCheckModalBtn = document.getElementById('openCustomerCheckModalBtn');

    const enrollmentContentSection = document.getElementById('enrollmentContentSection');
    const enrollmentContentTitle = enrollmentContentSection.querySelector('.section-title');
    const enrollmentContentCheckmark = document.getElementById('enrollmentContentCheckmark');
    const enrollmentContentInner = document.getElementById('enrollmentContentInner');

    const enrollmentAmountInput = document.getElementById('enrollmentAmount');
    const currencySelect = document.getElementById('currencySelect');
    const withdrawalEstimateInput = document.getElementById('withdrawalEstimate');
    const lookupEstimateBtn = document.getElementById('lookupEstimateBtn');
    const withdrawalAccountInput = document.getElementById('withdrawalAccount');

    const termsModal = document.getElementById('termsModal');
    const termsModalTitle = document.getElementById('termsModalTitle');
    const termsPages = document.querySelectorAll('.terms-page');
    const termsAgreeBtn = document.getElementById('termsAgreeBtn');

    const customerCheckModal = document.getElementById('customerCheckModal');
    const customerCheckAgreeBtn = document.getElementById('customerCheckAgreeBtn');
    const customerCheckModalPart2 = document.getElementById('customerCheckModalPart2');
    const customerCheckAgreeBtnPart2 = document.getElementById('customerCheckAgreeBtnPart2');


    // ìƒíƒœ ë³€ìˆ˜
    let isTermsAndExplanationsAgreed = false;
    let isCustomerCheckConfirmed = false;
    let isEnrollmentAmountFilled = false;
    let isCurrencySelected = false;
    let isWithdrawalEstimateLookedUp = false;
    let isWithdrawalAccountFilled = true; // ì¶œê¸ˆ ê³„ì¢ŒëŠ” ìë™ ì…ë ¥ë˜ë¯€ë¡œ ê¸°ë³¸ê°’ true

    let termsCurrentPage = 0;

    // ì•½ê´€ ëª¨ë‹¬ í˜ì´ì§€ë³„ ì œëª©
    const termsBaseTitles = [
      'ì•½ê´€ ë° ì„¤ëª…ì„œ ìš”ì•½',
      'ìƒí’ˆë³„ì ìš©ì•½ê´€',
      'ì™¸í™”ë³´í†µì˜ˆê¸ˆ ìƒí’ˆì„¤ëª…ì„œ',
      'ì„¤ëª…ì˜ë¬´ê´€ë ¨í™•ì¸ì„œ(ì°¨ëª…ê±°ë˜ê¸ˆì§€ì— ê´€í•œ ì„¤ëª…)',
      'ê°œì¸(ì‹ ìš©)ì •ë³´ ìˆ˜ì§‘ì´ìš©ì œê³µì¡°íšŒë™ì˜ì„œ(ë¹„ëŒ€ë©´ ê³„ì¢Œê°œì„¤ ì•ˆì‹¬ì°¨ë‹¨)'
    ];

    /**
     * ì´ˆê¸° UI ìƒíƒœ ì„¤ì •
     */
    function initializeUI() {
      encouragementMessageDiv.textContent = 'ì¤‘ìš”í•œ ë‚´ìš©ì´ë‹ˆ ê¼¼ê¼¼íˆ í™•ì¸í•´ ì£¼ì„¸ìš”! ğŸ˜';

      agreementConsentContent.classList.remove('collapsed');
      agreementConsentTitle.classList.add('rotated');

      enrollmentContentInner.classList.add('collapsed');
      enrollmentContentTitle.classList.remove('rotated'); 
      
      updateNextButtonState();
      updateAgreementConsentSectionStatus();
      updateAgreementButtonsState();
      updateEnrollmentContentStatus();
    }

    /**
     * 'ë‹¤ìŒ' ë²„íŠ¼ í™œì„±í™”/ë¹„í™œì„±í™” ìƒíƒœ ë° ì‘ì› ë©”ì‹œì§€ ì—…ë°ì´íŠ¸
     */
    function updateNextButtonState() {
      if (isTermsAndExplanationsAgreed && isCustomerCheckConfirmed &&
          isEnrollmentAmountFilled && isCurrencySelected && isWithdrawalEstimateLookedUp) {
        nextButton.disabled = false;
        nextButton.classList.remove('bg-gray-400','cursor-not-allowed');
        nextButton.classList.add('bg-blue-600','hover:bg-blue-700');
        nextButton.textContent = 'ë‹¤ìŒìœ¼ë¡œ';
        // ë‘ ë²ˆì§¸ ì‘ì› ë¬¸êµ¬ ë³€ê²½ ë° ì¤„ë°”ê¿ˆ ì ìš©
        encouragementMessageDiv.textContent = 'ëª¨ë“  ì •ë³´ê°€ ì…ë ¥ë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ‰\në§ˆì§€ë§‰ ë‹¨ê³„ë¡œ ì´ë™í•´ ì£¼ì„¸ìš”.';
      } else {
        nextButton.disabled = true;
        nextButton.classList.add('bg-gray-400','cursor-not-allowed');
        nextButton.classList.remove('bg-blue-600','hover:bg-blue-700');
        nextButton.textContent = 'ë‹¤ìŒìœ¼ë¡œ';
        encouragementMessageDiv.textContent = 'ì¤‘ìš”í•œ ë‚´ìš©ì´ë‹ˆ ê¼¼ê¼¼íˆ í™•ì¸í•´ ì£¼ì„¸ìš”! ğŸ˜';
      }
    }

    /**
     * ì•½ê´€ ë° ê³ ê° í™•ì¸ ë²„íŠ¼ì˜ í™œì„±í™”/ë¹„í™œì„±í™” ìƒíƒœë¥¼ ê°œë³„ì ìœ¼ë¡œ ê´€ë¦¬
     */
    function updateAgreementButtonsState() {
      if (isTermsAndExplanationsAgreed) {
        openTermsModalBtn.disabled = true;
        openTermsModalBtn.classList.remove('bg-blue-500','hover:bg-blue-600');
        openTermsModalBtn.classList.add('bg-gray-400','cursor-not-allowed');
      } else {
        openTermsModalBtn.disabled = false;
        openTermsModalBtn.classList.add('bg-blue-500','hover:bg-blue-600');
        openTermsModalBtn.classList.remove('bg-gray-400','cursor-not-allowed');
      }

      if (isCustomerCheckConfirmed) {
        openCustomerCheckModalBtn.disabled = true;
        openCustomerCheckModalBtn.classList.remove('bg-blue-500','hover:bg-blue-600');
        openCustomerCheckModalBtn.classList.add('bg-gray-400','cursor-not-allowed');
      } else {
        openCustomerCheckModalBtn.disabled = false;
        openCustomerCheckModalBtn.classList.add('bg-blue-500','hover:bg-blue-600');
        openCustomerCheckModalBtn.classList.remove('bg-gray-400','cursor-not-allowed');
      }
    }

    /**
     * ëª¨ë‹¬ì°½ ì—´ê¸°
     * @param {string} id - ì—´ê³ ì í•˜ëŠ” ëª¨ë‹¬ì˜ ID
     */
    function openModal(id){ const el=document.getElementById(id); el.classList.add('active'); el.classList.remove('hidden'); }

    /**
     * ëª¨ë‹¬ì°½ ë‹«ê¸°
     * @param {string} id - ë‹«ê³ ì í•˜ëŠ” ëª¨ë‹¬ì˜ ID
     */
    function closeModal(id){ const el=document.getElementById(id); el.classList.remove('active'); setTimeout(()=>el.classList.add('hidden'),300); }

    /**
     * ì•½ê´€ ëª¨ë‹¬ í˜ì´ì§€ ì „í™˜
     * @param {number} idx - ë³´ì—¬ì¤„ í˜ì´ì§€ì˜ ì¸ë±ìŠ¤
     */
    function showTermsPage(idx){
      termsPages.forEach((p,i)=>p.classList.toggle('active', i===idx));
      termsModalTitle.textContent = `ì•½ê´€ ë° ì„¤ëª…ì„œ ë™ì˜ (${idx + 1} / ${termsPages.length})`;

      const currentPageElement = termsPages[idx];
      const currentTitle = termsBaseTitles[idx];
      // ì²« í˜ì´ì§€ëŠ” ìš”ì•½ë³¸ì´ë¯€ë¡œ ê¸°ì¡´ h4ë¥¼ ì‚¬ìš©í•˜ê³ , ë‚˜ë¨¸ì§€ í˜ì´ì§€ì— h4ë¥¼ ë™ì ìœ¼ë¡œ ì¶”ê°€
      if (idx > 0 && !currentPageElement.querySelector('h4')) {
        const h4Element = document.createElement('h4');
        h4Element.classList.add('font-bold', 'text-gray-800', 'text-lg', 'mb-4', 'text-center'); // ê°€ìš´ë° ì •ë ¬ ì¶”ê°€
        h4Element.textContent = currentTitle;
        currentPageElement.prepend(h4Element);
      } else if (idx === 0) {
        // ì²« í˜ì´ì§€ì˜ ê¸°ì¡´ h4ì—ë„ ê°€ìš´ë° ì •ë ¬ ì ìš©
        currentPageElement.querySelector('h4').classList.add('text-center');
      }
      
      if (idx === 0) {
        termsAgreeBtn.textContent = 'ë™ì˜ ë° í™•ì¸ ì‹œì‘';
      } else {
        termsAgreeBtn.textContent = (idx === termsPages.length - 1) ? 'ë™ì˜ ì™„ë£Œ' : 'ë™ì˜í•˜ê¸°';
      }
    }

    /**
     * ì•½ê´€ ë™ì˜ ë²„íŠ¼ í´ë¦­ í•¸ë“¤ëŸ¬
     */
    function handleTermsAgreeButton(){
      termsCurrentPage++;
      if(termsCurrentPage < termsPages.length){
        showTermsPage(termsCurrentPage);
      } else {
        isTermsAndExplanationsAgreed = true;
        closeModal('termsModal');
        console.log('ì•½ê´€ ë° ì„¤ëª…ì„œ ë™ì˜ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. âœ…');
        termsCurrentPage = 0;
        showTermsPage(termsCurrentPage); // í˜ì´ì§€ ìƒíƒœ ì´ˆê¸°í™”
        updateAgreementConsentSectionStatus();
        updateAgreementButtonsState();
        updateNextButtonState();
      }
    }

    /**
     * ê³ ê° í™•ì¸ ì‚¬í•­ ë™ì˜ (Part 1) ë²„íŠ¼ í´ë¦­ í•¸ë“¤ëŸ¬
     */
    function handleCustomerCheckAgreeBtn(){
      closeModal('customerCheckModal');
      openModal('customerCheckModalPart2');
      console.log('ê³ ê° í™•ì¸ ì‚¬í•­ (1/2) ë™ì˜ ì™„ë£Œ. ë‹¤ìŒ ë‹¨ê³„ë¡œ ì´ë™í•©ë‹ˆë‹¤.');
    }

    /**
     * ê³ ê° í™•ì¸ ì‚¬í•­ ë™ì˜ (Part 2) ë²„íŠ¼ í´ë¦­ í•¸ë“¤ëŸ¬
     */
    function handleCustomerCheckAgreeBtnPart2(){
      isCustomerCheckConfirmed = true;
      closeModal('customerCheckModalPart2');
      console.log('ê³ ê° í™•ì¸ ì‚¬í•­ (2/2) ëª¨ë‘ ë™ì˜ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. âœ…');
      updateAgreementConsentSectionStatus();
      updateAgreementButtonsState();
      updateNextButtonState();
    }

    /**
     * ë™ì˜ ì„¹ì…˜ì˜ ì „ì²´ì ì¸ ìƒíƒœ (ì²´í¬ë§ˆí¬ í‘œì‹œ, ì„¹ì…˜ í™•ì¥/ì¶•ì†Œ) ì—…ë°ì´íŠ¸
     */
    function updateAgreementConsentSectionStatus(){
      if(isTermsAndExplanationsAgreed && isCustomerCheckConfirmed){
        agreementConsentCheckmark.style.display = 'inline-block';
        agreementConsentSection.classList.add('confirmed');

        setTimeout(()=>{
          agreementConsentContent.classList.add('collapsed');
          agreementConsentTitle.classList.remove('rotated');
          enrollmentContentInner.classList.remove('collapsed');
          enrollmentContentTitle.classList.add('rotated');
        },500);
      }
      updateNextButtonState();
    }

    /**
     * ê°€ì… ë‚´ìš© ì„¹ì…˜ì˜ ì „ì²´ì ì¸ ìƒíƒœ (ì²´í¬ë§ˆí¬ í‘œì‹œ) ì—…ë°ì´íŠ¸
     */
    function updateEnrollmentContentStatus() {
      isEnrollmentAmountFilled = enrollmentAmountInput.value.trim() !== '' && parseInt(enrollmentAmountInput.value) > 0;
      isCurrencySelected = currencySelect.value.trim() !== '';
      isWithdrawalEstimateLookedUp = withdrawalEstimateInput.value.trim() !== '' && withdrawalEstimateInput.value.includes('ì›');
      // isWithdrawalAccountFilledëŠ” í•­ìƒ trueì´ë¯€ë¡œ ë³„ë„ ê²€ì‚¬ ë¶ˆí•„ìš”

      if (isEnrollmentAmountFilled && isCurrencySelected && isWithdrawalEstimateLookedUp && isWithdrawalAccountFilled) {
        enrollmentContentCheckmark.style.display = 'inline-block';
        enrollmentContentSection.classList.add('confirmed');
      } else {
        enrollmentContentCheckmark.style.display = 'none';
        enrollmentContentSection.classList.remove('confirmed');
      }
      updateNextButtonState();
    }

    // --- ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ---

    document.addEventListener('DOMContentLoaded', () => {
      initializeUI();
    });

    document.getElementById('enrollmentContentSection')
      .querySelector('.section-title')
      .addEventListener('click', ()=>{
        enrollmentContentInner.classList.toggle('collapsed');
        enrollmentContentTitle.classList.toggle('rotated');
      });

    agreementConsentTitle.addEventListener('click', ()=>{
      if(!agreementConsentSection.classList.contains('confirmed')){
        agreementConsentContent.classList.toggle('collapsed');
        agreementConsentTitle.classList.toggle('rotated');
      }
    });

    homeButton.addEventListener('click', (e)=>{ e.preventDefault(); window.location.href='/foreign0'; });
    prevButton.addEventListener('click', ()=>{ window.location.href='/foreign4'; });

    nextButton.addEventListener('click', ()=>{
      if(isTermsAndExplanationsAgreed && isCustomerCheckConfirmed &&
         isEnrollmentAmountFilled && isCurrencySelected && isWithdrawalEstimateLookedUp && isWithdrawalAccountFilled){
        console.log('BNK ì‡¼í•‘í™˜ì „í†µì¥ ê°€ì…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤! ğŸ¥³');
        window.location.href='/foreign6';
      }else{
        let m='ìƒí’ˆ ê°€ì…ì„ ì™„ë£Œí•˜ë ¤ë©´ ë‹¤ìŒ ì‚¬í•­ì„ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤:\\n';
        if(!isTermsAndExplanationsAgreed) m+='- ì•½ê´€ ë° ì„¤ëª…ì„œ ë™ì˜\\n';
        if(!isCustomerCheckConfirmed) m+='- ê³ ê° í™•ì¸ ì‚¬í•­ í™•ì¸\\n';
        if(!(isEnrollmentAmountFilled && isCurrencySelected && isWithdrawalEstimateLookedUp)) m+='- ê°€ì… ë‚´ìš©ì„ ëª¨ë‘ ì…ë ¥ ë° í™•ì¸\\n';
        console.log(m);
      }
    });

    document.getElementById('openTermsModalBtn').addEventListener('click', ()=>{ showTermsPage(0); openModal('termsModal'); });
    document.getElementById('termsAgreeBtn').addEventListener('click', handleTermsAgreeButton);
    document.getElementById('openCustomerCheckModalBtn').addEventListener('click', ()=>openModal('customerCheckModal'));
    customerCheckAgreeBtn.addEventListener('click', handleCustomerCheckAgreeBtn);
    customerCheckAgreeBtnPart2.addEventListener('click', handleCustomerCheckAgreeBtnPart2);

    enrollmentAmountInput.addEventListener('input', updateEnrollmentContentStatus);
    currencySelect.addEventListener('change', updateEnrollmentContentStatus);

    lookupEstimateBtn.addEventListener('click', () => {
      if (enrollmentAmountInput.value.trim() !== '' && currencySelect.value.trim() !== '') {
        const amount = parseInt(enrollmentAmountInput.value);
        const currency = currencySelect.value;
        if (amount > 0) {
          let estimatedAmount = 0;
          switch(currency) {
            case 'USD': estimatedAmount = amount * 1350; break;
            case 'JPY': estimatedAmount = amount * 9; break;
            case 'EUR': estimatedAmount = amount * 1450; break;
            case 'GBP': estimatedAmount = amount * 1600; break;
            case 'CNY': estimatedAmount = amount * 180; break;
            case 'KRW': estimatedAmount = amount; break;
            default: estimatedAmount = amount;
          }
          withdrawalEstimateInput.value = `${estimatedAmount.toLocaleString()} ì›`;
          isWithdrawalEstimateLookedUp = true;
        } else {
          withdrawalEstimateInput.value = '';
          isWithdrawalEstimateLookedUp = false;
        }
      } else {
        withdrawalEstimateInput.value = '';
        isWithdrawalEstimateLookedUp = false;
      }
      updateEnrollmentContentStatus();
    });
  </script>
</body>
</html>
