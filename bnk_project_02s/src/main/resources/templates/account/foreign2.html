<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BNK ì‡¼í•‘í™˜ì „í†µì¥ - ë³¸ì¸í™•ì¸</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Inter for modern look -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            margin: 0;
            padding: 0;
            overflow-x: hidden;
        }
        .container {
            max-width: 500px;
            margin: 0 auto;
            background-color: #ffffff;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            border-radius: 1rem;
            overflow: hidden;
        }

        /* Header styles */
        header {
            flex: none; /* Do not grow/shrink */
        }
        
        /* Footer styles */
        .bottom-bar {
            flex: none; /* Do not grow/shrink */
            width: 100%;
            background-color: #ffffff;
            border-top: 1px solid #e2e8f0;
            padding: 0.75rem 1rem;
            box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.03);
            display: flex;
            justify-content: space-around;
            gap: 0.5rem;
            z-index: 10;
        }
        .bottom-bar button {
            flex: 1;
            padding: 0.75rem 1rem;
            border-radius: 0.75rem;
            font-weight: 600;
            font-size: 0.95rem;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        }
        .bottom-bar button:active {
            transform: scale(0.98);
        }

        /* Main content area */
        .main-content {
            flex-grow: 1; /* Allow content to fill available space */
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 1rem; /* Spacing between content blocks */
            overflow-y: auto; /* Allow scrolling if content overflows */
        }

        .content-block {
            background-color: #ffffff;
            border-radius: 0.75rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            min-height: 120px; /* Minimum height for visual consistency */
        }

        .content-block.interactive {
            cursor: pointer;
            transition: background-color 0.2s ease, transform 0.2s ease;
            justify-content: space-between; /* To push arrow to right */
            flex-direction: row; /* For side-by-side content and arrow */
            padding: 1rem 1.5rem; /* Adjusted padding for interactive block */
        }

        .content-block.interactive:hover {
            background-color: #f8fafc;
            transform: translateY(-2px);
        }
        .content-block.interactive:active {
            transform: scale(0.98);
        }

        /* Consent specific styles */
        .consent-status {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            color: #4a5568;
            margin-top: 0.5rem;
        }
        .consent-status.agreed {
            color: #10b981; /* Green for agreed */
            font-weight: 600;
        }
        .consent-status svg {
            margin-right: 0.25rem;
        }

        /* Modal styles from foreign1 for consistency */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .modal-overlay.open {
            opacity: 1;
            visibility: visible;
        }
        .modal-content {
            background-color: #ffffff;
            padding: 2rem;
            border-radius: 0.75rem;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            text-align: center;
            max-width: 350px;
            width: 90%;
            transform: translateY(-20px);
            transition: transform 0.3s ease;
        }
        .modal-overlay.open .modal-content {
            transform: translateY(0);
        }
        .modal-message-break-word {
            word-break: keep-all;
            white-space: normal;
        }
        .modal-content-details {
            max-height: 60vh; /* Allow scrolling for long content */
            overflow-y: auto;
            text-align: left;
            font-size: 0.875rem;
            line-height: 1.5;
            color: #4a5568;
            margin-top: 1rem;
            padding-right: 0.5rem; /* For scrollbar if present */
        }
        /* Style for disabled modal close button */
        .modal-content button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* New accordion styles for consent sections */
        .consent-accordion-item {
            width: 100%;
            border: 1px solid #e2e8f0;
            border-radius: 0.75rem;
            margin-bottom: 0.75rem;
            overflow: hidden; /* Ensure rounded corners */
            background-color: #fff;
        }

        .consent-accordion-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 1.25rem;
            cursor: pointer;
            background-color: #ffffff;
            transition: background-color 0.2s ease;
        }
        .consent-accordion-header:hover {
            background-color: #f8fafc;
        }

        .consent-accordion-title {
            display: flex;
            align-items: center;
            flex-grow: 1;
            text-align: left;
        }

        .consent-accordion-text {
            font-size: 1rem;
            font-weight: 600;
            color: #374151; /* Gray-700 */
        }
        .consent-checkmark {
            color: #10b981; /* Green checkmark */
            font-size: 1.2rem;
            margin-left: 0.5rem;
            display: none; /* Hidden by default */
        }

        .consent-accordion-subtitle { /* Keeping this style although its content is removed from HTML */
            font-size: 0.75rem;
            color: #6b7280; /* Gray-500 */
            margin-top: 0.25rem;
            text-align: left;
        }

        .consent-accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out, padding 0.5s ease-out;
            padding: 0; /* Remove initial padding to collapse completely */
            color: #4a5568;
            line-height: 1.5;
            border-top: 1px solid #e2e8f0; /* Separator line between header and content */
            margin-top: 0; /* Remove top margin here to reduce blank space */
        }
        .consent-accordion-content.open {
            max-height: 80vh; /* Increased height to utilize more screen space */
            padding: 1rem 1.25rem; /* Re-apply padding when open, to match inner content margin */
        }
        .consent-accordion-icon {
            transition: transform 0.3s ease;
            color: #9ca3af; /* Gray-400 */
        }
        .consent-accordion-icon.rotate {
            transform: rotate(180deg);
        }

        /* Styles for the "ë™ì˜í•©ë‹ˆë‹¤" button wrapper within the accordion content */
        .agree-button-container-in-content {
            display: flex;
            justify-content: center;
            padding-top: 1rem; /* Padding above button within content */
            border-top: 1px solid #e2e8f0; /* Separator above button */
            margin-top: 1rem; /* Space above the separator */
        }
        .agree-button {
            background-color: #2563eb; /* Blue-600 */
            color: #ffffff;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            transition: background-color 0.2s ease;
            cursor: pointer;
            width: 100%; /* Make button full width within its container */
        }
        .agree-button:hover:not(:disabled) {
            background-color: #1d4ed8; /* Blue-700 */
        }
        .agree-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Styles for distinguishing summary and full content */
        .summary-styled-section {
            background-color: #e0f2fe; /* Light blue background */
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1rem; /* Space below summary */
            text-align: left;
        }

        .full-content-styled-section { /* New wrapper for full content and its button */
            background-color: #FFF9FC; /* Very light pink background, even lighter than rose-50 */
            border-radius: 0.5rem;
            padding: 1rem; /* Inner padding for the content itself */
            display: flex; /* Use flex to control content and button layout */
            flex-direction: column;
            text-align: left; /* Ensure all text inside is left-aligned */
        }

        .full-content-styled-section h4 {
            margin-top: 0; /* Remove default margin for h4 inside this section */
            margin-bottom: 0.5rem; /* Keep some space below its own title */
            text-align: left; /* Ensure its title is left-aligned */
        }

        .full-content-scroll-area {
            max-height: 150px; /* Adjusted to be closer to summary height */
            overflow-y: auto;
            text-align: left;
            padding-right: 0.5rem;
            flex-grow: 1; /* Allow the scroll area to take up available space */
        }
        /* Style for highlighted text */
        .highlighted-text {
            color: #2563eb; /* Blue-600 for emphasis */
            font-weight: 600; /* Keep bold for emphasis */
        }

        /* Step Indicator Styles */
        .step-indicator {
            display: flex;
            width: 100%;
            height: 4px; /* Height of the progress bar */
            background-color: #e0e0e0; /* Light gray for undone steps */
            border-radius: 2px;
            overflow: hidden; /* Ensure rounded corners for the progress bar */
            margin-top: 0.5rem; /* Space below title */
        }

        .step-indicator-progress {
            width: 33.33%; /* 1/3 for the first step */
            height: 100%;
            background-color: #2563eb; /* Blue for the current step */
            border-radius: 2px;
        }

        /* Added for textContent \n support */
        #encouragementMessage {
            white-space: pre-wrap;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center">
    <div class="container">
        <!-- Header -->
        <header class="flex items-center justify-between p-4 bg-white border-b border-gray-200">
            <a href="/foreign0" class="flex items-center text-blue-700 font-medium text-base hover:text-blue-800 transition-colors duration-300">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
                </svg>
                í™ˆìœ¼ë¡œ
            </a>
            <h1 class="text-xl font-bold text-gray-800">ë³¸ì¸í™•ì¸</h1>
            <button class="p-2 rounded-full text-gray-500 hover:bg-gray-100 transition-colors duration-300 opacity-0 cursor-default">
                <!-- Placeholder for symmetry, or add a relevant icon if needed -->
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.354v15.304m0 0l-6.5-6.5m6.5 6.5l6.5-6.5" />
                </svg>
            </button>
        </header>

        <!-- Step Indicator (Added below header and before encouragement message) -->
        <div class="step-indicator mx-4 mt-4">
            <div class="step-indicator-progress"></div>
        </div>

        <!-- Encouragement Message -->
        <div id="encouragementMessage" class="text-center text-base font-semibold text-gray-700 p-3 rounded-lg bg-yellow-100 mx-4 mt-4 shadow-sm">
            <!-- Message will be updated by JS -->
        </div>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- í•„ìˆ˜ ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš© ë™ì˜ ë¸”ë¡ -->
            <div class="content-block h-auto py-6">
                <p class="text-lg font-bold text-gray-800 mb-4">í•„ìˆ˜ ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš© ë™ì˜</p>

                <!-- ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš© ë™ì˜ Accordion Item -->
                <div class="consent-accordion-item" id="personalInfoConsentItem">
                    <div class="consent-accordion-header" data-target="personalInfoConsentContent">
                        <div class="consent-accordion-title">
                            <span class="consent-accordion-text">ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš© ë™ì˜</span>
                            <span id="personalInfoCheckmark" class="consent-checkmark">âœ”</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2 consent-accordion-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                        </svg>
                    </div>
                    <div id="personalInfoConsentContent" class="consent-accordion-content">
                        <div class="summary-styled-section">
                            <h4 class="font-semibold text-sm mb-1">í•µì‹¬ ìš”ì•½</h4>
                            <p class="mb-0">
                                BNKì‡¼í•‘í™˜ì „ì˜ˆê¸ˆ í†µì¥ ë° ì¹´ë“œ ê°œì„¤, í™˜ì „/ê²°ì œ ì„œë¹„ìŠ¤ ì œê³µì„ ìœ„í•´ ì„±ëª…, ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸, ì—°ë½ì²˜, ê³„ì¢Œ/ì¹´ë“œ ì´ìš© ë‚´ì—­ ë“± ìµœì†Œí•œì˜ ê°œì¸ì •ë³´ë¥¼ ìˆ˜ì§‘ ë° ì´ìš©í•©ë‹ˆë‹¤.
                            </p>
                        </div>
                        <div class="full-content-styled-section">
                            <h4 class="font-semibold text-sm mb-1">ì „ì²´ ë‚´ìš©</h4>
                            <div class="full-content-scroll-area" id="personalInfoFullContent">
                                <h4 class="font-semibold text-sm mb-1">1. ìˆ˜ì§‘ ëª©ì </h4>
                                <p class="mb-2">
                                    BNKì‡¼í•‘í™˜ì „ì˜ˆê¸ˆ í†µì¥ ê°œì„¤ ë° ì‡¼í•‘í™˜ì „ì²´í¬ì¹´ë“œ ë°œê¸‰, í™˜ì „ ë° í•´ì™¸ ê²°ì œ ì„œë¹„ìŠ¤ ì œê³µ, ê³ ê° ë³¸ì¸ í™•ì¸ ë° ì¸ì¦, ê¸ˆìœµê±°ë˜ ê´€ë ¨ ì—…ë¬´ ì²˜ë¦¬(ì˜ˆ: ì›í™”/ì™¸í™” ì´ì²´, í™˜ì „ ê¸°ë¡ ê´€ë¦¬, ë¶€ì •ê±°ë˜ ë°©ì§€ ë“±).
                                    ê³ ê° ìƒë‹´ ë° ë¯¼ì› ì²˜ë¦¬, ë²•ë ¹ìƒ ì˜ë¬´ ì´í–‰.
                                </p>
                                <h4 class="font-semibold text-sm mb-1">2. ìˆ˜ì§‘ í•­ëª©</h4>
                                <p class="mb-2">
                                    <span class="highlighted-text">ê°œì¸ì‹ë³„ì •ë³´:</span> ì„±ëª…, ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸(ë˜ëŠ” ì™¸êµ­ì¸ë“±ë¡ë²ˆí˜¸), íœ´ëŒ€í° ë²ˆí˜¸, ì£¼ì†Œ, ì´ë©”ì¼ ì£¼ì†Œ, ì§ì—…. <br>
                                    <span class="highlighted-text">ê¸ˆìœµê±°ë˜ì •ë³´:</span> ê³„ì¢Œë²ˆí˜¸, ê±°ë˜ë‚´ì—­, ì”ì•¡, í™˜ì „ ê¸°ë¡, ì¹´ë“œ ì´ìš© ë‚´ì—­ ë“±. <br>
                                    <span class="highlighted-text">ì‹ ë¶„ì¦ ì •ë³´:</span> ì‹ ë¶„ì¦(ì£¼ë¯¼ë“±ë¡ì¦, ìš´ì „ë©´í—ˆì¦ ë“±) ì‚¬ë³¸ì— í¬í•¨ëœ ì •ë³´ (ì„±ëª…, ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸, ë°œê¸‰ì¼, ì‚¬ì§„ ë“±). <br>
                                    <span class="highlighted-text">ì ‘ê·¼ë§¤ì²´ ì •ë³´:</span> ì „ìê¸ˆìœµê±°ë˜ ì‹œ ì´ìš©í•˜ëŠ” ë¹„ë°€ë²ˆí˜¸, ê³µì¸ì¸ì¦ì„œ ì •ë³´ ë“±.
                                </p>
                                <h4 class="font-semibold text-sm mb-1">3. ë³´ìœ  ë° ì´ìš© ê¸°ê°„</h4>
                                <p class="mb-2">
                                    ê¸ˆìœµê±°ë˜ ì¢…ë£Œì¼ë¡œë¶€í„° 5ë…„ê°„ (ì „ìê¸ˆìœµê±°ë˜ë²• ë° íŠ¹ì • ê¸ˆìœµê±°ë˜ì •ë³´ì˜ ë³´ê³  ë° ì´ìš© ë“±ì— ê´€í•œ ë²•ë¥  ë“± ê´€ë ¨ ë²•ë ¹ì— ë”°ë¼ ë³´ì¡´ ì˜ë¬´ê°€ ìˆëŠ” ê²½ìš° í•´ë‹¹ ë²•ë ¹ì˜ ë³´ì¡´ ê¸°ê°„ ì¤€ìˆ˜). <br>
                                    ì„œë¹„ìŠ¤ í•´ì§€ ë˜ëŠ” ëª©ì  ë‹¬ì„± ì‹œ ì¦‰ì‹œ íŒŒê¸°.
                                </p>
                                <h4 class="font-semibold text-sm mb-1">4. ë™ì˜ ê±°ë¶€ ì‹œ ë¶ˆì´ìµ</h4>
                                <p class="mb-2">
                                    ìœ„ ê°œì¸ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš©ì— ë™ì˜í•˜ì§€ ì•Šìœ¼ì‹¤ ê²½ìš°, BNKì‡¼í•‘í™˜ì „ì˜ˆê¸ˆ í†µì¥ ê°œì„¤ ë° ì‡¼í•‘í™˜ì „ì²´í¬ì¹´ë“œ ë°œê¸‰, ê·¸ë¦¬ê³  ê´€ë ¨ í•´ì™¸ ê²°ì œ ì„œë¹„ìŠ¤ ì´ìš©ì´ ë¶ˆê°€ëŠ¥í•©ë‹ˆë‹¤.
                                </p>
                            </div>
                        </div>
                        <div class="agree-button-container-in-content">
                            <button id="personalInfoAgreeBtn" class="agree-button">ë™ì˜í•©ë‹ˆë‹¤</button>
                        </div>
                    </div>
                </div>

                <!-- ë¯¼ê°í•œ ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš© ë™ì˜ Accordion Item -->
                <div class="consent-accordion-item" id="sensitiveInfoConsentItem" style="display: block;">
                    <div class="consent-accordion-header" data-target="sensitiveInfoConsentContent">
                        <div class="consent-accordion-title">
                            <span class="consent-accordion-text">ë¯¼ê°í•œ ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš© ë™ì˜</span>
                            <span id="sensitiveInfoCheckmark" class="consent-checkmark">âœ”</span>
                        </div>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2 consent-accordion-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                        </svg>
                    </div>
                    <div id="sensitiveInfoConsentContent" class="consent-accordion-content">
                        <div class="summary-styled-section">
                            <h4 class="font-semibold text-sm mb-1">í•µì‹¬ ìš”ì•½</h4>
                            <p class="mb-0">
                                ë¹„ëŒ€ë©´ ì‹¤ëª… í™•ì¸ì„ ìœ„í•´ íŠ¹ì • ë¯¼ê° ì •ë³´ (ìƒì²´ì¸ì‹ ì •ë³´ ë“±)ë¥¼ ìˆ˜ì§‘í•˜ë©°, ì´ëŠ” ë³¸ì¸ í™•ì¸ ë° ê¸ˆìœµê±°ë˜ ì•ˆì •ì„± í™•ë³´ ëª©ì ìœ¼ë¡œë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤.
                            </p>
                        </div>
                        <div class="full-content-styled-section">
                            <h4 class="font-semibold text-sm mb-1">ì „ì²´ ë‚´ìš©</h4>
                            <div class="full-content-scroll-area" id="sensitiveInfoFullContent">
                                <h4 class="font-semibold text-sm mb-1">1. ìˆ˜ì§‘ ëª©ì </h4>
                                <p class="mb-2">
                                    ì˜¨ë¼ì¸ ê³„ì¢Œ ê°œì„¤ ë° ì¹´ë“œ ë°œê¸‰ ì‹œ ë¹„ëŒ€ë©´ ë³¸ì¸ í™•ì¸ì„ ìœ„í•œ ë¯¼ê° ì •ë³´ í™œìš©, ê¸ˆìœµê±°ë˜ì˜ ì•ˆì •ì„± í™•ë³´, ë¶€ì • ì‚¬ìš© ë°©ì§€.
                                </p>
                                <h4 class="font-semibold text-sm mb-1">2. ìˆ˜ì§‘ í•­ëª©</h4>
                                <p class="mb-2">
                                    <span class="highlighted-text">ë¯¼ê° ì •ë³´:</span> ë¹„ëŒ€ë©´ ë³¸ì¸ í™•ì¸ì— í•„ìš”í•œ íŠ¹ì • ì •ë³´ (ìƒì²´ì¸ì‹ ì •ë³´ ë“±). <br>
                                    <span class="highlighted-text">ì‹ ë¶„ì¦ ë‚´ ë¯¼ê° ì •ë³´:</span> ì‹ ë¶„ì¦ ì‚¬ë³¸ì— í¬í•¨ëœ íŠ¹ì • ì •ë³´ (ì§€ë¬¸ ë“±).
                                </p>
                                <h4 class="font-semibold text-sm mb-1">3. ë³´ìœ  ë° ì´ìš© ê¸°ê°„</h4>
                                <p class="mb-2">
                                    ë³¸ì¸ í™•ì¸ ì ˆì°¨ ì™„ë£Œ ì‹œ ë˜ëŠ” ì„œë¹„ìŠ¤ ì œê³µ ëª©ì  ë‹¬ì„± ì‹œ ì¦‰ì‹œ íŒŒê¸°. <br>
                                    ë‹¨, ê´€ë ¨ ë²•ë ¹(ì˜ˆ: ê¸ˆìœµì‹¤ëª…ê±°ë˜ ë° ë¹„ë°€ë³´ì¥ì— ê´€í•œ ë²•ë¥  ë“±)ì— ë”°ë¼ ë³´ì¡´ ì˜ë¬´ê°€ ìˆëŠ” ê²½ìš° í•´ë‹¹ ë²•ë ¹ì˜ ë³´ì¡´ ê¸°ê°„ê¹Œì§€ ë³´ìœ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
                                </p>
                                <h4 class="font-semibold text-sm mb-1">4. ë™ì˜ ê±°ë¶€ ì‹œ ë¶ˆì´ìµ</h4>
                                <p class="mb-2">
                                    ìœ„ ë¯¼ê° ì •ë³´ ìˆ˜ì§‘ ë° ì´ìš©ì— ë™ì˜í•˜ì§€ ì•Šìœ¼ì‹¤ ê²½ìš°, ë¹„ëŒ€ë©´ ë³¸ì¸ í™•ì¸ ì ˆì°¨ë¥¼ ì´ìš©í•˜ì‹¤ ìˆ˜ ì—†ìœ¼ë©°, ê³„ì¢Œ ê°œì„¤ ë° ì¹´ë“œ ë°œê¸‰ì´ ì œí•œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ë³¸ì¸ í™•ì¸ ë°©ë²•(ì˜ˆ: íƒ€í–‰ ê³„ì¢Œ ì¸ì¦ ë“±)ì„ ì´ìš©í•˜ì‹œê²Œ ë©ë‹ˆë‹¤.
                                </p>
                            </div>
                        </div>
                        <div class="agree-button-container-in-content">
                            <button id="sensitiveInfoAgreeBtn" class="agree-button">ë™ì˜í•©ë‹ˆë‹¤</button>
                        </div>
                    </div>
                </div>

                <div id="consentStatus" class="consent-status mt-3 hidden">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-500" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
                    </svg>
                    <span class="agreed">ëª¨ë“  í•„ìˆ˜ ë™ì˜ ì™„ë£Œ</span>
                </div>
            </div>
        </main>

        <!-- Fixed Bottom Bar -->
        <footer class="bottom-bar">
            <button id="prevButton" class="bg-gray-200 text-gray-700 hover:bg-gray-300">ì´ì „</button>
            <button id="nextButton" class="bg-blue-600 text-white hover:bg-blue-700">ì‹ ë¶„ì¦ ì´¬ì˜</button>
        </footer>
    </div>

    <!-- Login Required Modal (ê¸°ì¡´ ëª¨ë‹¬) -->
    <div id="loginRequiredModal" class="modal-overlay">
        <div class="modal-content">
            <h3 class="text-xl font-bold mb-4 text-gray-800">ë¡œê·¸ì¸ í•„ìš” ì•ˆë‚´</h3>
            <p class="text-gray-700 mb-6 modal-message-break-word">
                ì£„ì†¡í•©ë‹ˆë‹¤, ê³ ê°ë‹˜.<br>
                í•´ë‹¹ ì„œë¹„ìŠ¤ëŠ” ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.<br>
                ë¡œê·¸ì¸ í›„ ë‹¤ì‹œ ì´ìš©í•´ì£¼ì„¸ìš”.
            </p>
            <div class="flex justify-center">
                <button id="loginRequiredConfirmBtn" class="bg-blue-600 text-white px-5 py-2 rounded-md font-semibold hover:bg-blue-700 transition duration-200">í™•ì¸</button>
            </div>
        </div>
    </div>

    <!-- ID Card Guidance Modal (ìƒˆë¡œ ì¶”ê°€ëœ ëª¨ë‹¬) -->
    <div id="idCardGuidanceModal" class="modal-overlay">
        <div class="modal-content">
            <h3 class="text-xl font-bold mb-4 text-gray-800">ì‹ ë¶„ì¦ ì´¬ì˜ ì•ˆë‚´</h3>
            <p class="text-gray-700 mb-6 modal-message-break-word">
                ì •í™•í•œ ì¸ì‹ì„ ìœ„í•´ ì´¬ì˜ ì „<br>
                ë Œì¦ˆë¥¼ ê¹¨ë—ì´ ë‹¦ì•„ ì£¼ì„¸ìš”! ğŸ˜Š
            </p>
            <div class="flex justify-center">
                <button id="idCardGuidanceConfirmBtn" class="bg-blue-600 text-white px-5 py-2 rounded-md font-semibold hover:bg-blue-700 transition duration-200">í™•ì¸</button>
            </div>
        </div>
    </div>

    <script>
        // --- DOM ìš”ì†Œ ì •ì˜ ---
        const personalInfoConsentItem = document.getElementById('personalInfoConsentItem');
        const personalInfoConsentHeader = personalInfoConsentItem.querySelector('.consent-accordion-header');
        const personalInfoAgreeBtn = document.getElementById('personalInfoAgreeBtn');
        const personalInfoCheckmark = document.getElementById('personalInfoCheckmark');
        const personalInfoAccordionIcon = personalInfoConsentItem.querySelector('.consent-accordion-icon');
        const personalInfoConsentContent = personalInfoConsentItem.querySelector('.consent-accordion-content');

        const sensitiveInfoConsentItem = document.getElementById('sensitiveInfoConsentItem');
        const sensitiveInfoConsentHeader = sensitiveInfoConsentItem.querySelector('.consent-accordion-header');
        const sensitiveInfoAgreeBtn = document.getElementById('sensitiveInfoAgreeBtn');
        const sensitiveInfoCheckmark = document.getElementById('sensitiveInfoCheckmark');
        const sensitiveInfoAccordionIcon = sensitiveInfoConsentItem.querySelector('.consent-accordion-icon');
        const sensitiveInfoConsentContent = sensitiveInfoConsentItem.querySelector('.consent-accordion-content');

        const consentStatusDiv = document.getElementById('consentStatus');
        const nextButton = document.getElementById('nextButton');
        const prevButton = document.getElementById('prevButton');
        const homeButton = document.querySelector('header a'); // 'í™ˆìœ¼ë¡œ' ë²„íŠ¼ ì„ íƒ
        const encouragementMessageDiv = document.getElementById('encouragementMessage');

        const loginRequiredModal = document.getElementById('loginRequiredModal');
        const loginRequiredConfirmBtn = document.getElementById('loginRequiredConfirmBtn');
        const idCardGuidanceModal = document.getElementById('idCardGuidanceModal'); // ìƒˆë¡œ ì¶”ê°€ëœ ëª¨ë‹¬
        const idCardGuidanceConfirmBtn = document.getElementById('idCardGuidanceConfirmBtn'); // ìƒˆë¡œ ì¶”ê°€ëœ ëª¨ë‹¬ì˜ í™•ì¸ ë²„íŠ¼

        // --- ë™ì˜ ìƒíƒœ ì¶”ì  ë³€ìˆ˜ ---
        let isPersonalInfoAgreed = false;
        let isSensitiveInfoAgreed = false;

        // --- ì´ˆê¸° ìƒíƒœ ì„¤ì • í•¨ìˆ˜ ---
        function initializeUI() {
            // ì´ˆê¸° ë©”ì‹œì§€ ì„¤ì •
            updateEncouragementMessage('âœ¨ í†µì¥ ê°œì„¤ì„ ìœ„í•´ í•„ìˆ˜ ì•½ê´€ì— ë™ì˜í•´ì£¼ì„¸ìš”.');
            
            // ê°œì¸ì •ë³´ ë™ì˜ ì„¹ì…˜ ë‹«íŒ ìƒíƒœë¡œ ì‹œì‘ (ê¸°ë³¸ CSSì— open í´ë˜ìŠ¤ ì œê±°)
            personalInfoConsentContent.classList.remove('open');
            personalInfoAccordionIcon.classList.remove('rotate');
            personalInfoCheckmark.style.display = 'none';

            // ë¯¼ê° ì •ë³´ ë™ì˜ ì„¹ì…˜ë„ ë‹«íŒ ìƒíƒœë¡œ ì‹œì‘ (ê¸°ë³¸ CSSì— open í´ë˜ìŠ¤ ì œê±°)
            sensitiveInfoConsentContent.classList.remove('open');
            sensitiveInfoAccordionIcon.classList.remove('rotate');
            sensitiveInfoCheckmark.style.display = 'none';

            // 'ë‹¤ìŒ' ë²„íŠ¼ ë¹„í™œì„±í™”
            disableNextButton();
            
            // ì „ì²´ ë™ì˜ ìƒíƒœ ë©”ì‹œì§€ ìˆ¨ê¹€
            consentStatusDiv.classList.add('hidden');

            // ì‹ ë¶„ì¦ ì´¬ì˜ ì•ˆë‚´ ëª¨ë‹¬ ì´ˆê¸° ìˆ¨ê¹€
            idCardGuidanceModal.classList.remove('open');
        }

        // --- ê¸°ëŠ¥ í•¨ìˆ˜ ---
        function toggleAccordion(contentElement, iconElement) {
            contentElement.classList.toggle('open');
            iconElement.classList.toggle('rotate');
        }

        function updateEncouragementMessage(message) {
            // innerHTML ëŒ€ì‹  textContentë¥¼ ì‚¬ìš©í•˜ê³  \nìœ¼ë¡œ ì¤„ë°”ê¿ˆ ì²˜ë¦¬
            // CSS 'white-space: pre-wrap;'ê³¼ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ì¤„ë°”ê¿ˆì´ ì •ìƒì ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.
            encouragementMessageDiv.textContent = message; 
        }

        function disableNextButton() {
            nextButton.disabled = true;
            nextButton.classList.add('bg-gray-400', 'cursor-not-allowed');
            nextButton.classList.remove('bg-blue-600', 'hover:bg-blue-700');
        }

        function enableNextButton() {
            nextButton.disabled = false;
            nextButton.classList.remove('bg-gray-400', 'cursor-not-allowed');
            nextButton.classList.add('bg-blue-600', 'hover:bg-blue-700');
        }

        // --- ë™ì˜ ìƒíƒœ ì—…ë°ì´íŠ¸ ë° UI ì œì–´ í•¨ìˆ˜ ---
        function updateAgreementState() {
            if (isPersonalInfoAgreed && isSensitiveInfoAgreed) {
                consentStatusDiv.classList.remove('hidden');
                enableNextButton();
                updateEncouragementMessage('ğŸ‰ ëª¨ë“  í•„ìˆ˜ ì•½ê´€ì— ë™ì˜í–ˆì–´ìš”!\nì´ì œ ì‹ ë¶„ì¦ ì´¬ì˜ì„ ì§„í–‰í•´ì£¼ì„¸ìš”.');
            } else {
                consentStatusDiv.classList.add('hidden');
                disableNextButton();
                updateEncouragementMessage('âœ¨ í†µì¥ ê°œì„¤ì„ ìœ„í•´ í•„ìˆ˜ ì•½ê´€ì— ë™ì˜í•´ì£¼ì„¸ìš”.');
            }
        }

        // --- ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ í•¨ìˆ˜ ---
        function handlePersonalInfoAgree() {
            isPersonalInfoAgreed = true;
            personalInfoCheckmark.style.display = 'inline-block';
            
            // ì•„ì½”ë””ì–¸ ë‹«ê¸°
            personalInfoConsentContent.classList.remove('open');
            personalInfoAccordionIcon.classList.remove('rotate');

            updateAgreementState();
        }

        function handleSensitiveInfoAgree() {
            isSensitiveInfoAgreed = true;
            sensitiveInfoCheckmark.style.display = 'inline-block';
            
            // ì•„ì½”ë””ì–¸ ë‹«ê¸°
            sensitiveInfoConsentContent.classList.remove('open');
            sensitiveInfoAccordionIcon.classList.remove('rotate');

            updateAgreementState();
        }

        function handleAccordionClick(headerElement, contentElement, iconElement) {
            // ë™ì˜ ìƒíƒœì™€ ê´€ê³„ì—†ì´ í´ë¦­ ì‹œ í† ê¸€
            toggleAccordion(contentElement, iconElement);
        }

        // --- ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ ---
        document.addEventListener('DOMContentLoaded', initializeUI);

        // 'í™ˆìœ¼ë¡œ' ë²„íŠ¼ í´ë¦­ ì‹œ /foreign0ìœ¼ë¡œ ì´ë™
        homeButton.addEventListener('click', function(event) {
            event.preventDefault(); // ê¸°ë³¸ ë§í¬ ì´ë™ ë°©ì§€
            window.location.href = '/foreign0';
        });

        personalInfoConsentHeader.addEventListener('click', () => {
            handleAccordionClick(personalInfoConsentHeader, personalInfoConsentContent, personalInfoAccordionIcon);
        });
        personalInfoAgreeBtn.addEventListener('click', handlePersonalInfoAgree);

        sensitiveInfoConsentHeader.addEventListener('click', () => {
            handleAccordionClick(sensitiveInfoConsentHeader, sensitiveInfoConsentContent, sensitiveInfoAccordionIcon);
        });
        sensitiveInfoAgreeBtn.addEventListener('click', handleSensitiveInfoAgree);

        prevButton.addEventListener('click', function() {
            window.location.href = '/foreign1'; // ì´ì „ í˜ì´ì§€ë¡œ ì´ë™
        });

        nextButton.addEventListener('click', function() {
            if (isPersonalInfoAgreed && isSensitiveInfoAgreed) {
                idCardGuidanceModal.classList.add('open'); // ì‹ ë¶„ì¦ ì´¬ì˜ ì•ˆë‚´ ëª¨ë‹¬ ì—´ê¸°
            } else {
                alert('ëª¨ë“  í•„ìˆ˜ ë™ì˜ í•­ëª©ì— ë™ì˜í•´ì•¼ ë‹¤ìŒ ë‹¨ê³„ë¡œ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
            }
        });
        
        loginRequiredConfirmBtn.addEventListener('click', function() {
            loginRequiredModal.classList.remove('open');
        });

        // ì‹ ë¶„ì¦ ì´¬ì˜ ì•ˆë‚´ ëª¨ë‹¬ì˜ 'í™•ì¸' ë²„íŠ¼ í´ë¦­ ì‹œ
        idCardGuidanceConfirmBtn.addEventListener('click', function() {
            idCardGuidanceModal.classList.remove('open'); // ëª¨ë‹¬ ë‹«ê¸°
            window.location.href = '/foreign3'; // ë‹¤ìŒ í˜ì´ì§€ë¡œ ì´ë™
        });
    </script>
</body>
</html>
